---
last_modified_on: "2020-07-31"
delivery_guarantee: "best_effort"
component_title: "Kubernetes Logs"
description: "The Vector `kubernetes_logs` source ingests data through Kubernetes logs from `Pod`s and outputs `log` events."
event_types: ["log"]
function_category: "collect"
issues_url: https://github.com/timberio/vector/issues?q=is%3Aopen+is%3Aissue+label%3A%22source%3A+kubernetes_logs%22
operating_systems: ["Linux","MacOS","Windows"]
sidebar_label: "kubernetes_logs|[\"log\"]"
source_url: https://github.com/timberio/vector/tree/master/src/sources/kubernetes_logs
status: "prod-ready"
title: "Kubernetes Logs Source"
unsupported_operating_systems: []
---

import Fields from '@site/src/components/Fields';
import Field from '@site/src/components/Field';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

The Vector `kubernetes_logs` source
ingests data through Kubernetes logs from `Pod`s and outputs
[`log`][docs.data-model.log] events.

<!--
     THIS FILE IS AUTOGENERATED!

     To make changes please edit the template located at:

     website/docs/reference/sources/kubernetes_logs.md.erb
-->

## Configuration

<Tabs
  block={true}
  defaultValue="common"
  values={[{"label":"Common","value":"common"},{"label":"Advanced","value":"advanced"}]}>
<TabItem value="common">

```toml title="vector.toml"
[sources.my_source_id]
  type = "kubernetes_logs" # required
```

</TabItem>
<TabItem value="advanced">

```toml title="vector.toml"
[sources.my_source_id]
  # General
  type = "kubernetes_logs" # required
  auto_partial_merge = true # optional, default
  self_node_name = "${VECTOR_SELF_NODE_NAME}" # optional, default

  # Annotation fields
  annotation_fields.pod_labels = "kubernetes.pod_labels" # optional, default
  annotation_fields.pod_name = "kubernetes.pod_name" # optional, default
  annotation_fields.pod_namespace = "kubernetes.pod_namespace" # optional, default
  annotation_fields.pod_uid = "kubernetes.pod_uid" # optional, default
```

</TabItem>
</Tabs>

## Options

<Fields filters={true}>
<Field
  common={false}
  defaultValue={null}
  enumValues={null}
  examples={[]}
  groups={[]}
  name={"annotation_fields"}
  path={null}
  relevantWhen={null}
  required={false}
  templateable={false}
  type={"table"}
  unit={null}
  warnings={[]}
  >

### annotation_fields

Configuration for how the events are annotated with `Pod` metadata.


<Fields filters={false}>
<Field
  common={false}
  defaultValue={"kubernetes.pod_labels"}
  enumValues={null}
  examples={["kubernetes.pod_labels"]}
  groups={[]}
  name={"pod_labels"}
  path={"annotation_fields"}
  relevantWhen={null}
  required={false}
  templateable={false}
  type={"string"}
  unit={null}
  warnings={[]}
  >

#### pod_labels

The field name to annotate `Pod` labels as.



</Field>
<Field
  common={false}
  defaultValue={"kubernetes.pod_name"}
  enumValues={null}
  examples={["kubernetes.pod_name"]}
  groups={[]}
  name={"pod_name"}
  path={"annotation_fields"}
  relevantWhen={null}
  required={false}
  templateable={false}
  type={"string"}
  unit={null}
  warnings={[]}
  >

#### pod_name

The field name to annotate `Pod` name as.



</Field>
<Field
  common={false}
  defaultValue={"kubernetes.pod_namespace"}
  enumValues={null}
  examples={["kubernetes.pod_namespace"]}
  groups={[]}
  name={"pod_namespace"}
  path={"annotation_fields"}
  relevantWhen={null}
  required={false}
  templateable={false}
  type={"string"}
  unit={null}
  warnings={[]}
  >

#### pod_namespace

The field name to annotate `Pod` namespace as.



</Field>
<Field
  common={false}
  defaultValue={"kubernetes.pod_uid"}
  enumValues={null}
  examples={["kubernetes.pod_uid"]}
  groups={[]}
  name={"pod_uid"}
  path={"annotation_fields"}
  relevantWhen={null}
  required={false}
  templateable={false}
  type={"string"}
  unit={null}
  warnings={[]}
  >

#### pod_uid

The field name to annotate `Pod` uid as.



</Field>
</Fields>

</Field>
<Field
  common={false}
  defaultValue={true}
  enumValues={null}
  examples={[true,false]}
  groups={[]}
  name={"auto_partial_merge"}
  path={null}
  relevantWhen={null}
  required={false}
  templateable={false}
  type={"bool"}
  unit={null}
  warnings={[]}
  >

### auto_partial_merge

Automatically merge partial messages into a signle event. Partial here is in
respect to messages that were split by the Kubernetes Container Runtime log
driver.



</Field>
<Field
  common={false}
  defaultValue={"${VECTOR_SELF_NODE_NAME}"}
  enumValues={null}
  examples={["${VECTOR_SELF_NODE_NAME}"]}
  groups={[]}
  name={"self_node_name"}
  path={null}
  relevantWhen={null}
  required={false}
  templateable={false}
  type={"string"}
  unit={null}
  warnings={[]}
  >

### self_node_name

The name of the Kubernetes `Node` this Vector instance runs at. Configured to
use an env var by default, to be evaluated to a value provided by Kubernetes at
`Pod` deploy time.



</Field>
</Fields>

## Env Vars

<Fields filters={true}>
<Field
  common={false}
  defaultValue={null}
  enumValues={null}
  examples={["10.96.0.1"]}
  groups={[]}
  name={"KUBERNETES_SERVICE_HOST"}
  path={null}
  relevantWhen={{"requirements":{"kubernetes_in_cluster":true}}}
  required={true}
  templateable={false}
  type={"string"}
  unit={null}
  warnings={[]}
  >

### KUBERNETES_SERVICE_HOST

An in-cluster Kubernetes API `Service` host. Provided automatically by the
Kubernetes when running in the cluster.



</Field>
<Field
  common={false}
  defaultValue={null}
  enumValues={null}
  examples={["443"]}
  groups={[]}
  name={"KUBERNETES_SERVICE_PORT"}
  path={null}
  relevantWhen={{"requirements":{"kubernetes_in_cluster":true}}}
  required={true}
  templateable={false}
  type={"string"}
  unit={null}
  warnings={[]}
  >

### KUBERNETES_SERVICE_PORT

An in-cluster Kubernetes API `Service` port. Provided automatically by the
Kubernetes when running in the cluster.



</Field>
</Fields>

## How It Works

### Connecting To The Kubernetes API server

Vector will automatically attempt to connect to the [Kubernetes API
server][urls.kubernetes_api_server] for you. If Vector is running in a
Kubernetes cluster then Vector will connect to that cluster using the
[Kubernetes provided access information][urls.kubernetes_accessing_api_from_pod].

### Environment Variables

Environment variables are supported through all of Vector's configuration.
Simply add `${MY_ENV_VAR}` in your Vector configuration file and the variable
will be replaced before being evaluated.

You can learn more in the
[Environment Variables][docs.configuration#environment-variables] section.

[docs.configuration#environment-variables]: /docs/setup/configuration/#environment-variables
[docs.data-model.log]: /docs/about/data-model/log/
[urls.kubernetes_accessing_api_from_pod]: https://kubernetes.io/docs/tasks/access-application-cluster/access-cluster/#accessing-the-api-from-a-pod
[urls.kubernetes_api_server]: https://kubernetes.io/docs/reference/command-line-tools-reference/kube-apiserver/
